{% extends 'base.html' %}
{% load custom_tags %}
{% load crispy_forms_tags %}

{#only displayed on FILTER pages#}
{% block filter %}
    <h3>{{ request.resolver_match.kwargs.slug.capitalize }}</h3>
{% endblock %}



{% block content %}

    <div>
        <form class="form-inline my-2 my-lg-0" action="{% url 'games:search' %}" method="get">
            {{ form|crispy }}
        </form>
    </div>

    {% for game in games %}
        <section id='gallery' class='pic-section'>
            <ul class='pic-list top'>
                    <li>
                        <div class="single-game-block">
                            <div class='cake-pic'>
                                <img src="/media/images/games/{{ game.name.lower }}.jpg" alt="{{ game.name }}">
                                {% if request.user|has_group:'managers' %}
                                    <a id="edit" class="btn" href="{% url 'games:edit' game.id %}">Edit game</a>
                                    <a id="delete" class="btn" href="{% url 'games:delete' game.id %}">Delete game</a>
                                {% endif %}
                            </div>
                            <div class="game-info">
                                <p class="price">${{ game.price }}</p>
                                <a class="price" href="{% url 'order:add-to-cart' game.id %}">Buy</a>
                                <div>
                                    {% if game.genre.all %}
                                        <p>{% for genre in game.genre.all %}
                                            <a href="{% url 'games:filter' genre.name %}">{{ genre }}</a>
                                        {% endfor %}</p>
                                    {% endif %}
                                    <a href="{% url 'games:detail' game.id %}">{{ game.name }}</a>
                                </div>

                            </div>
                        </div>
                    </li>
                </ul>
        </section>



    {% endfor %}
{% endblock %}